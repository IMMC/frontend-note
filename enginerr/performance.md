# 性能优化

性能优化的目标，性能优化的目标是为了更快的显示页面， 更快的响应。 两大方向：

1. 减少请求的耗时
2. 加快渲染，展示有意义的信息

## 减少请求耗时

1. 打包的优化：减少包的体积。extrnal 排除变动少的包。多页 spa 动态 import
2. 使用 cdn 加速，以及利用浏览器缓存
3. 压缩图片，雪碧图（HTTP2.0 或许不再适用，多路复用使得请求成本变得廉价），小图转换为 base64
4. preconnect 提前建立链接

## 渲染优化

保证页面可以尽快的渲染出来。

1. 前置 css 的加载，滞后 js 的加载。css 会阻塞渲染， js 会阻塞 dom 解析
2. 多图页面懒加载图片，保证首屏先渲染
3. 项目中实践，和逻辑无关的样式和结构写在 html 里面
4. ssr 服务端渲染

## 代码优化

1. useMemo, useCallback 结合。
2. 减少回流，设置样式后立刻获取
3. 动画类，transform 3d 利用浏览器分层渲染的原理，分层.
4. 滚动, passive: true, 提高滚动效率

# 性能指标收集

1. fp 第一次渲染
2. fcp 第一次渲染内容
3. lcp 最大内容变化
4. TTI 首次可交互时间
5. cls 累计位移偏移
